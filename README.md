# Deno Deps Detective

1. detective _(noun)_

> a person, especially a police officer, whose occupation is to investigate and solve crimes.

Don't let your deno project dependencies become a **crime scene!**

`detective` helps you keep track of your deno dependencies and their versions. It also helps you track important metrics like number of files and total size. It's like a detective for your deno project dependencies. (Last sentence generated by an AI. Brilliant. ğŸ˜…)

## Installation

```bash
deno install --allow-read --allow-write --allow-net --allow-env --allow-run --unstable https://deno.land/x/detective/detective.ts
```

## Usage

First, create a `deps.json` file using `deno info --json <your_root.ts>`.

```bash
deno info --json ./src/index.ts > deps.json
```

Then, run `detective` with the `deps.json` file as an argument.

```bash
detective deps.json
```

The default mode will show you diagnostics of your dependencies.

You can also use `--json` to output a JSON version of the diagnostics.

```bash
detective --json deps.json
```

## Example

```bash
$ deno info --json ./src/index.ts > deps.json
$ detective deps.json

>>> Userland
â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (idx) â”‚ label         â”‚ value    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     0 â”‚ "Total size"  â”‚ "470 kB" â”‚
â”‚     1 â”‚ "Total files" â”‚ 200      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

>>> Dependencies
â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (idx) â”‚ label         â”‚ value     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     0 â”‚ "Total size"  â”‚ "4.99 MB" â”‚
â”‚     1 â”‚ "Mean size"   â”‚ "47.5 kB" â”‚
â”‚     2 â”‚ "Median size" â”‚ "4.57 kB" â”‚
â”‚     3 â”‚ "p90 size"    â”‚ "92.4 kB" â”‚
â”‚     4 â”‚ "Max size"    â”‚ "1.19 MB" â”‚
â”‚     5 â”‚ "Total files" â”‚ 1365      â”‚
â”‚     6 â”‚ "Max files"   â”‚ 412       â”‚
â”‚     7 â”‚ "p90 files"   â”‚ 9         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Largest deps (> p90):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (idx) â”‚ module                           â”‚ bytes       â”‚ size (%) â”‚ files â”‚ files (%) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     0 â”‚ "std@0.170.0"                    â”‚ "1.19 MB"   â”‚ "23.92%" â”‚    87 â”‚ "06.37%"  â”‚
â”‚     1 â”‚ "v96/csstype@3.1.1"              â”‚ "857.89 kB" â”‚ "17.20%" â”‚     1 â”‚ "00.07%"  â”‚
â”‚     2 â”‚ "v102/lodash@4.17.21"            â”‚ "557 kB"    â”‚ "11.17%" â”‚   412 â”‚ "30.18%"  â”‚
â”‚     3 â”‚ "v102/ajv@8.11.2"                â”‚ "349.18 kB" â”‚ "07.00%" â”‚    93 â”‚ "06.81%"  â”‚
â”‚     4 â”‚ "denoflate@1.2.1"                â”‚ "306.6 kB"  â”‚ "06.15%" â”‚     3 â”‚ "00.22%"  â”‚
â”‚     5 â”‚ "esbuild@v0.14.51"               â”‚ "192.33 kB" â”‚ "03.86%" â”‚     4 â”‚ "00.29%"  â”‚
â”‚     6 â”‚ "v102/preact@10.11.3"            â”‚ "135.21 kB" â”‚ "02.71%" â”‚    13 â”‚ "00.95%"  â”‚
â”‚     7 â”‚ "v96/lodash-es@4.17.21"          â”‚ "126.79 kB" â”‚ "02.54%" â”‚   317 â”‚ "23.22%"  â”‚
â”‚     8 â”‚ "v102/@rjsf/utils@5.0.0-beta.15" â”‚ "99.58 kB"  â”‚ "02.00%" â”‚     2 â”‚ "00.15%"  â”‚
â”‚     9 â”‚ "v102/@dnd-kit/core@6.0.5"       â”‚ "93.07 kB"  â”‚ "01.87%" â”‚   114 â”‚ "08.35%"  â”‚
â”‚    10 â”‚ "v102/@rjsf/utils@5.0.0-beta.13" â”‚ "92.42 kB"  â”‚ "01.85%" â”‚     2 â”‚ "00.15%"  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Dependencies with most files (> p90):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (idx) â”‚ module                           â”‚ bytes       â”‚ size (%) â”‚ files â”‚ files (%) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     0 â”‚ "v102/lodash@4.17.21"            â”‚ "557 kB"    â”‚ "11.17%" â”‚   412 â”‚ "30.18%"  â”‚
â”‚     1 â”‚ "v96/lodash-es@4.17.21"          â”‚ "126.79 kB" â”‚ "02.54%" â”‚   317 â”‚ "23.22%"  â”‚
â”‚     2 â”‚ "v102/@dnd-kit/core@6.0.5"       â”‚ "93.07 kB"  â”‚ "01.87%" â”‚   114 â”‚ "08.35%"  â”‚
â”‚     3 â”‚ "v102/ajv@8.11.2"                â”‚ "349.18 kB" â”‚ "07.00%" â”‚    93 â”‚ "06.81%"  â”‚
â”‚     4 â”‚ "std@0.170.0"                    â”‚ "1.19 MB"   â”‚ "23.92%" â”‚    87 â”‚ "06.37%"  â”‚
â”‚     5 â”‚ "v102/@dnd-kit/utilities@3.2.0"  â”‚ "9.18 kB"   â”‚ "00.18%" â”‚    34 â”‚ "02.49%"  â”‚
â”‚     6 â”‚ "tabler_icons_tsx@0.0.2"         â”‚ "17.47 kB"  â”‚ "00.35%" â”‚    30 â”‚ "02.20%"  â”‚
â”‚     7 â”‚ "v102/@dnd-kit/sortable@7.0.1"   â”‚ "16.63 kB"  â”‚ "00.33%" â”‚    28 â”‚ "02.05%"  â”‚
â”‚     8 â”‚ "fresh@1.1.2"                    â”‚ "60.36 kB"  â”‚ "01.21%" â”‚    16 â”‚ "01.17%"  â”‚
â”‚     9 â”‚ "v102/preact@10.11.3"            â”‚ "135.21 kB" â”‚ "02.71%" â”‚    13 â”‚ "00.95%"  â”‚
â”‚    10 â”‚ "v102/@dnd-kit/accessibility@3." â”‚ "1.56 kB"   â”‚ "00.03%" â”‚     9 â”‚ "00.66%"  â”‚
â”‚    11 â”‚ "v102/@supabase/realtime-js@1.7" â”‚ "28.94 kB"  â”‚ "00.58%" â”‚     9 â”‚ "00.66%"  â”‚
â”‚    12 â”‚ "v102/@supabase/storage-js@1.7." â”‚ "19.48 kB"  â”‚ "00.39%" â”‚     9 â”‚ "00.66%"  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
